import BetimModel from "../model/betim/betim-model.js";

let betim = new BetimModel();
let contentFrameWebview;
let betimTextInput;
let barUrlInput;

window.onload = () => {
    // TODO: On page loaded activites
    document.querySelector("#load-btn").addEventListener('click', loadWebviewUrlAction);

    contentFrameWebview = document.querySelector("#content-frame-webview");
    betimTextInput = document.querySelector("#betim-text-input");
    barUrlInput = document.querySelector("#bar-url-input");

    console.log("Browser window is loaded.");
}

/**
 * Load given URL into the webview
 */
function loadWebviewUrlAction(){
    let userInput = barUrlInput.value;
    contentFrameWebview.src = userInput;
    console.log("Load web page: ", userInput.value);
    // Add spinners
}

/**
 * Apply BETİM text input action
 * Get user input from betim text input then 
 * apply the CSS code to the webpage which is 
 * generated by BETİM model.
 */
function applyBetimTextInputAction() {
    let userInput = betimTextInput.value;
    betim.evalText(userInput).then((result) => { 
        // Insert generated css
        contentFrameWebview.insertCSS(result);
        // Show sucess dialog
    }).catch(() => {
        // Alert dialog implementation
    });
}